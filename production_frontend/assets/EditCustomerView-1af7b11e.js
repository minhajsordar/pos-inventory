import{af as w,u as k,g as x,f as g,ac as C,o as y,c as q,w as A,b as r,a as c,ax as p,e as B,ak as U,aj as E,Q as N}from"./index-1afe7156.js";import{Q}from"./QPage-dbe3b711.js";import{u as $,a as V}from"./use-quasar-7dcfde9a.js";import{u as D,g as b}from"./userAuthStore-bea79ead.js";import{e as L}from"./validationHelper-21a8e46b.js";const S=r("div",{class:"p-0 text-h5 mb-2"}," Add new customer ",-1),j={class:"mb-6"},P={key:0,class:"text-red-8 text-xs q-pl-sm"},R={class:"mb-6"},T={class:"mb-6"},z={class:"mb-6"},J={__name:"EditCustomerView",setup(O){const t=$();D();const n=w(),h=k(),i=x({}),a=g({name:"",phone:"",email:"",address:""}),u=g({name:"",phone:"",email:"",address:""}),_=async()=>{var o;if(n.params.id=="create")return;const d={method:"GET",url:"api/customer/customer_lists/"+n.params.id,headers:{Authorization:`Bearer ${b("token")}`}};try{t.loading.show();const e=await V.request(d);t.loading.hide(),a.name=e.data.name,u.name=e.data.name,a.phone=e.data.phone,u.phone=e.data.phone,a.email=e.data.email,u.email=e.data.email,a.address=e.data.address,u.address=e.data.address}catch(e){((o=e==null?void 0:e.response)==null?void 0:o.status)==401?t.notify({message:e.response.data.message+". Login to try again.",color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]}):t.notify({message:e.message,color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]}),t.loading.hide(),console.error(e)}finally{}};C(()=>{_()});const v=async d=>{var m,s,f;d.preventDefault(),i.value={};const o={};if(a.name&&(o.name=a.name),L(a.name)||(i.value.name="Required feild"),a.phone&&(o.phone=a.phone),a.email&&(o.email=a.email),a.address&&(o.address=a.address),Object.keys(i.value).length!==0)return;if(Object.keys(o).length<=0){t.notify({message:"Empty Form Submission Not Allowed",color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]});return}const e={headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${b("token")}`},data:o};n.params.id=="create"?(e.method="post",e.url="api/customer/customer_lists"):(e.method="put",e.url="api/customer/customer_lists/"+n.params.id);try{const l=await V.request(e);(m=n.query)!=null&&m.redirect?h.push(`/${(s=n.query)==null?void 0:s.redirect}`):h.push("/dashboard/customer/customer_list"),t.notify({message:"Updated Successfully!",color:"primary",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]})}catch(l){((f=l==null?void 0:l.response)==null?void 0:f.status)==401?t.notify({message:l.response.data.message+". Login to try again.",color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]}):t.notify({message:l.message,color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]}),console.error(l)}};return(d,o)=>(y(),q(Q,{padding:""},{default:A(()=>{var e,m;return[S,r("div",null,[r("div",j,[c(p,{label:"Name *",type:"text",placeholder:"Name",modelValue:a.name,"onUpdate:modelValue":o[0]||(o[0]=s=>a.name=s),outlined:"",dense:""},null,8,["modelValue"]),(e=i.value)!=null&&e.name?(y(),B("div",P,[r("span",null,U((m=i.value)==null?void 0:m.name),1)])):E("",!0)]),r("div",R,[c(p,{label:"Phone ",type:"tel",placeholder:"+1 012345644",modelValue:a.phone,"onUpdate:modelValue":o[1]||(o[1]=s=>a.phone=s),outlined:"",dense:""},null,8,["modelValue"])]),r("div",T,[c(p,{label:"Email ",type:"email",placeholder:"name@example.com",modelValue:a.email,"onUpdate:modelValue":o[2]||(o[2]=s=>a.email=s),outlined:"",dense:""},null,8,["modelValue"])]),r("div",z,[c(p,{label:"Address ",type:"text",placeholder:"Address",modelValue:a.address,"onUpdate:modelValue":o[3]||(o[3]=s=>a.address=s),outlined:"",dense:""},null,8,["modelValue"])]),c(N,{label:d.$route.params.id==="create"?"Create Customer":"Update Customer",color:"green",onClick:v},null,8,["label"])])]}),_:1}))}};export{J as default};
