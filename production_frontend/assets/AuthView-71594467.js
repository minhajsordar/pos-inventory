import{Q as S,a as V,b as T,c as b}from"./QTabPanels-293b62f7.js";import{u as q,f as Q,g as p,o as j,e as P,b as s,a as l,w as i,h as C,i as U,j as d,v as c,Q as w,d as y}from"./index-b55a7827.js";import{u as N,a as h}from"./use-quasar-96558313.js";import{u as D,s as x}from"./userAuthStore-0c477450.js";import{i as B}from"./validationHelper-21a8e46b.js";import"./QResizeObserver-25fbf90b.js";import"./rtl-36dd996b.js";import"./touch-5ff41afe.js";import"./selection-af93f90a.js";const E={class:"flex justify-center items-center h-screen w-screen"},O={class:"q-gutter-y-md",style:{"max-width":"600px"}},R={class:"mb-6"},A=s("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900"},"Email address",-1),I={class:"mb-6"},L=s("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-900"},"Password",-1),J={className:"w-full flex justify-center"},M={class:"mb-6"},$=s("label",{for:"email2",class:"block mb-2 text-sm font-medium text-gray-900"},"Email address",-1),z={class:"mb-6"},F=s("label",{for:"password2",class:"block mb-2 text-sm font-medium text-gray-900"},"Password",-1),G={class:"mb-6"},H=s("label",{for:"passwordConfirm",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Confirm Password",-1),K={className:"w-full flex justify-center"},le={__name:"AuthView",setup(W){const r=N(),f=D(),g=q(),e=Q({email:"",password:"",confirmpassword:""}),n=p(!1),v=p(!0),u=p("signin"),_=async m=>{var a;m.preventDefault();const t={method:"POST",url:"api/user/auth",headers:{"Content-Type":"application/json"},data:{email:e.email,password:e.password}};n.value=!0;try{const o=await h.request(t);n.value=!1,x("token",o.data.token),sessionStorage.setItem("auth-user",JSON.stringify(o.data)),f.userData=o.data,g.push("/dashboard"),r.notify({message:"welcome back",color:"primary",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]}),e.email="",e.password="",e.confirmpassword=""}catch(o){((a=o==null?void 0:o.response)==null?void 0:a.status)==401?r.notify({message:o.response.data.message+". Login to try again.",color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]}):r.notify({message:o.message,color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]}),console.error(o),n.value=!1}},k=async m=>{var a;if(m.preventDefault(),!B(String(e.email))){r.notify({message:"Please enter valid email format",color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]});return}if(!e.email||!e.password){r.notify({message:"Required feild",color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]});return}else if(e.password!==e.confirmpassword){r.notify({message:"Password and Confirmpassword dose not matched",color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]});return}const t={method:"POST",url:"api/user/auth/register",headers:{"Content-Type":"application/json"},data:{email:e.email,password:e.password}};n.value=!0;try{const o=await h.request(t);n.value=!1,v.value=!0,console.log(o.data),x("token",o.data.token),localStorage.setItem("auth-user",JSON.stringify(o.data)),f.userData=o.data,g.push("/dashboard"),r.notify({message:"Registration Successfully!",color:"primary",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]}),e.email="",e.password="",e.confirmpassword=""}catch(o){console.error(o),((a=o==null?void 0:o.response)==null?void 0:a.status)==401?r.notify({message:o.response.data.message+". Login to try again.",color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]}):r.notify({message:o.message,color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]}),n.value=!1}};return(m,t)=>(j(),P("div",E,[s("div",null,[s("div",O,[l(C,null,{default:i(()=>[l(S,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:i(()=>[l(V,{name:"signin",label:"Sign In"})]),_:1},8,["modelValue"]),l(U),l(T,{modelValue:u.value,"onUpdate:modelValue":t[6]||(t[6]=a=>u.value=a),animated:""},{default:i(()=>[l(b,{name:"signin"},{default:i(()=>[s("form",{class:"w-72",onSubmit:_},[s("div",R,[A,d(s("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=a=>e.email=a),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"john.doe@company.com",required:""},null,512),[[c,e.email]])]),s("div",I,[L,d(s("input",{type:"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=a=>e.password=a),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"•••••••••",required:""},null,512),[[c,e.password]])]),s("div",J,[l(w,{type:"submit",color:"green"},{default:i(()=>[y(" Sign in ")]),_:1})])],32)]),_:1}),l(b,{name:"register"},{default:i(()=>[s("form",{class:"w-72",onSubmit:k},[s("div",M,[$,d(s("input",{type:"email",id:"email2","onUpdate:modelValue":t[3]||(t[3]=a=>e.email=a),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"john.doe@company.com",required:""},null,512),[[c,e.email]])]),s("div",z,[F,d(s("input",{type:"password",id:"password2","onUpdate:modelValue":t[4]||(t[4]=a=>e.password=a),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"•••••••••",required:""},null,512),[[c,e.password]])]),s("div",G,[H,d(s("input",{type:"password",id:"passwordConfirm","onUpdate:modelValue":t[5]||(t[5]=a=>e.confirmpassword=a),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"•••••••••",required:""},null,512),[[c,e.confirmpassword]])]),s("div",K,[l(w,{type:"submit",color:"green"},{default:i(()=>[y(" Register ")]),_:1})])],32)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]))}};export{le as default};
