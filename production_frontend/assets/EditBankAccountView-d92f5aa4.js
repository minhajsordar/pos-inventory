import{af as q,u as U,g as V,f as x,ac as Q,o as f,c as S,w as $,b as c,ak as y,a as i,ax as h,e as k,aj as g,Q as E}from"./index-1afe7156.js";import{Q as R}from"./QSelect-38e1999a.js";import{Q as C}from"./QPage-dbe3b711.js";import{u as D,a as A}from"./use-quasar-7dcfde9a.js";import{u as L,g as B}from"./userAuthStore-bea79ead.js";import{e as _}from"./validationHelper-21a8e46b.js";import"./QChip-67221c42.js";import"./QItemLabel-80fbf0da.js";import"./selection-d27bdc72.js";import"./rtl-36dd996b.js";import"./format-6ceb96d6.js";const j={class:"p-0 text-h5 mb-2"},z={class:"mb-6"},O={key:0,class:"text-red-8 text-xs q-pl-sm"},P={class:"mb-6"},F={key:0,class:"text-red-8 text-xs q-pl-sm"},G={class:"mb-6"},I={key:0,class:"text-red-8 text-xs q-pl-sm"},M={class:"mb-6"},H={class:"mb-6"},se={__name:"EditBankAccountView",setup(J){const s=D();L();const r=q(),v=U();V([]);const o=V({}),e=x({name:"",accountNumber:"",balance:0,accountType:"",note:""}),d=x({name:"",accountNumber:"",balance:0,accountType:"",note:""}),T=async()=>{var t;if(r.params.id=="create")return;const u={method:"GET",url:"api/bank_account/bank_account_lists/"+r.params.id,headers:{Authorization:`Bearer ${B("token")}`}};try{s.loading.show();const a=await A.request(u);s.loading.hide(),e.name=a.data.name,d.name=a.data.name,e.accountNumber=a.data.accountNumber,d.accountNumber=a.data.accountNumber,e.balance=a.data.balance,d.balance=a.data.balance,e.accountType=a.data.accountType,d.accountType=a.data.accountType,e.note=a.data.note,d.note=a.data.note}catch(a){((t=a==null?void 0:a.response)==null?void 0:t.status)==401?s.notify({message:a.response.data.message+". Login to try again.",color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]}):s.notify({message:a.message,color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]}),s.loading.hide(),console.error(a)}};Q(()=>{T()});const w=async u=>{var m,p,b;u.preventDefault(),o.value={};const t={};if(e.name&&(t.name=e.name),_(e.name)||(o.value.name="Required feild"),e.accountNumber&&(t.accountNumber=e.accountNumber),_(e.accountNumber)||(o.value.accountNumber="Required feild"),e.balance&&(t.balance=e.balance),_(e.balance)||(o.value.balance="Required feild"),e.accountType&&(t.accountType=e.accountType),e.note&&(t.note=e.note),Object.keys(o.value).length!==0)return;if(Object.keys(t).length<=0){s.notify({message:"Empty Form Submission Not Allowed",color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]});return}const a={headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${B("token")}`},data:t};r.params.id=="create"?(a.method="post",a.url="api/bank_account/bank_account_lists"):(a.method="put",a.url="api/bank_account/bank_account_lists/"+r.params.id);try{const n=await A.request(a);(m=r.query)!=null&&m.redirect?v.push(`/${(p=r.query)==null?void 0:p.redirect}`):v.push("/dashboard/bank_account/bank_account_list"),s.notify({message:"Updated Successfully!",color:"primary",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]})}catch(n){((b=n==null?void 0:n.response)==null?void 0:b.status)==401?s.notify({message:n.response.data.message+". Login to try again.",color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]}):s.notify({message:n.message,color:"red",position:"top",actions:[{icon:"close",color:"white",handler:()=>{}}]}),console.error(n)}};return(u,t)=>(f(),S(C,{padding:""},{default:$(()=>{var a,m,p,b,n,N;return[c("div",j,y(u.$route.params.id==="create"?"Add Bank account":"Update Bank account"),1),c("div",null,[c("div",z,[i(h,{label:"Name *",type:"text",placeholder:"Name",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.name=l),outlined:"",dense:""},null,8,["modelValue"]),(a=o.value)!=null&&a.name?(f(),k("div",O,[c("span",null,y((m=o.value)==null?void 0:m.name),1)])):g("",!0)]),c("div",P,[i(h,{label:"Account number *",type:"text",placeholder:"Account number",modelValue:e.accountNumber,"onUpdate:modelValue":t[1]||(t[1]=l=>e.accountNumber=l),outlined:"",dense:""},null,8,["modelValue"]),(p=o.value)!=null&&p.accountNumber?(f(),k("div",F,[c("span",null,y((b=o.value)==null?void 0:b.accountNumber),1)])):g("",!0)]),c("div",G,[i(h,{label:"Account balance *",type:"text",placeholder:"Account balance",modelValue:e.balance,"onUpdate:modelValue":t[2]||(t[2]=l=>e.balance=l),outlined:"",dense:""},null,8,["modelValue"]),(n=o.value)!=null&&n.balance?(f(),k("div",I,[c("span",null,y((N=o.value)==null?void 0:N.balance),1)])):g("",!0)]),c("div",M,[i(R,{label:"Select an option for Account type ",placeholder:"Account type",modelValue:e.accountType,"onUpdate:modelValue":t[3]||(t[3]=l=>e.accountType=l),options:["bkash","nagad","roket","bank","card"],outlined:"",dense:""},null,8,["modelValue"])]),c("div",H,[i(h,{label:"Note ",type:"text",placeholder:"Note",modelValue:e.note,"onUpdate:modelValue":t[4]||(t[4]=l=>e.note=l),outlined:"",dense:""},null,8,["modelValue"])]),i(E,{label:u.$route.params.id==="create"?"Add Bank account":"Update Bank account",color:"green",onClick:w},null,8,["label"])])]}),_:1}))}};export{se as default};
